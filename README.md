# 🎯 重要用語クイズマスター

IT専門用語を「4択クイズ」で反復学習する、ブラウザだけで動く学習アプリです。学習状況はブラウザの `localStorage` に保存されます（サーバ不要）。

## ✅ できること

- **章の選択**: 1章〜21章（`data/cards-ch*.js`）を切り替えて学習
- **出題方向**: 「用語 → 意味」/「意味 → 用語」
- **モード**
  - **全問**: その章の全カード
  - **NGのみ**: 成績（`v_stats`）から「正解2回未満」または「不正解あり」のカードだけを抽出
- **シャッフル**: 出題順をランダム化
- **解説タブ**: 「ポイント / 具体例 / 暗記法 / 注意点」をタブで表示
- **学習履歴**: セット終了時に結果を保存し、一覧表示
- **章別・習得状況グラフ**: 積み上げ棒で「マスター/学習中/苦手/未着手」を可視化（Chart.js）
- **CSV出力**: 章・用語ごとの正解数/不正解数をエクスポート
- **リセット**: `localStorage` を全消去して初期化

## 🚀 起動方法

静的ファイルなので基本は `index.html` を開くだけで動きます。ブラウザによっては `file://` で `localStorage` の挙動が不安定になることがあるため、**ローカルサーバでの起動を推奨**します。

例（Python）:

```bash
python -m http.server 8000
```

その後、ブラウザで `http://localhost:8000/` を開いてください。

## 🕹️ 使い方（画面操作）

- **章の選択**: 上部の「章」プルダウン
- **出題方向**: 「用語 → 意味」/「意味 → 用語」
- **全問 / NGのみ**: モードを切替（NGのみで対象ゼロの場合は自動で全問に戻ります）
- **🔀 シャッフル**: 現在の出題セットの並び順をランダム化
- **← 前へ / 次へ進む →**
  - **次へ進む**: 回答済みのときだけ進めます（未回答では進みません）
  - **最後の問題**: セット終了として履歴に保存し、アラートを表示して終了します
- **📜 履歴を見る**: セット単位の学習履歴を表示
- **📊 グラフ**: 章ごとの習得状況を表示
- **📤 CSV出力**: 成績をCSVで保存（Excelで文字化けしにくいようBOM付き）
- **リセット**: 成績/履歴/設定を含む `localStorage` をクリア

## ⌨️ キーボード操作

- **[1]〜[4]**: 選択肢を回答
- **[Enter] / [Space]**: 回答後に「次へ進む」

※「前へ/次へ」をキーボードで移動するショートカットは現状ありません（ボタン操作）。

## 🔍 解説（`extraExplain`）の仕様

解説文はカードの `extraExplain`（文字列）を解析して、タブ（ポイント/具体例/暗記法/注意点）に分割して表示します。

### 記述ルール（行頭キーワード）

`extraExplain` に以下を **行頭** で書くと、そのセクションとして認識されます。区切りは「行頭のみ」で、文章途中の `例:` などでは分割されません。

| タブ | 行頭キーワード | メモ |
| :-- | :-- | :-- |
| ポイント | `ポイント:` または `ポイント：` | 最重要ポイント |
| 具体例 | `例:` または `例：` | 計算・イメージなど |
| 暗記法 | `暗記:` または `暗記：` | 覚え方のコツ |
| 注意点 | `ひっかけ:` または `ひっかけ：` | 勘違いポイント |

キーワードが無い場合は、全文を「ポイント」として表示します。

## 📊 習得状況グラフの判定基準

各カードの成績（`v_stats`）から、章ごとに以下へ分類します。

- **マスター**: 正解が2回以上（`c >= 2`）
- **学習中**: 正解が1回（`c == 1`）
- **苦手**: 不正解が正解より多い（`w > c`）
- **未着手**: 未回答（データ無し、または `c == 0 && w == 0`）

## 💾 保存されるデータ（localStorage）

- `v_ch`: 最後に選択した章（例: `ch1`）
- `v_dir`: 出題方向（`forward` / `reverse`）
- `v_stats`: カード別成績（例: `{ "<id>": { c: 正解数, w: 不正解数 } }`）
- `v_hist`: セット終了時の履歴（日時・章・正解数・正解率）

## 🗂️ データ形式（`data/cards-ch*.js`）

各章ファイルは `CARDS_CH<章番号>` という配列を `window` に定義します。各要素（カード）は次の形を想定しています。

```js
{
  id: "ch1-001",
  term: "用語",
  definition: "意味",
  extraExplain: "ポイント: ...\n例: ...\n暗記: ...\nひっかけ: ..."
}
```

## 💡 学習効率を上げるコツ

- **NGのみ**で「正解2回未満 + 不正解あり」を優先的に潰す
- **[1-4] + [Space]** のホームポジションでテンポよく周回する